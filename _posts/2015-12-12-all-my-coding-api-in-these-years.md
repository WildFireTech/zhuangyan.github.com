---
layout: post
title: 这样年我写过的API接口
tags: ["api"]
---
这两个月一直在给我们的APP写API接口服务，使我想起了以前开发和调用各种接口的日子。虽然前一公司有个叫“独立服务”的小组，专门负责写各种接口的，但是有的接口还有需要我们进行开发和调用。

* 2006年，维护市物价局的网站。省物价局来了个需求，要把市物价局网站的新闻定期通过接口同步到省物价局网价。看了几天API文档，只需要把新闻给成规定的XML格式post给服务端，但我还是不会写，最后这个需求就被公司给拒绝了。

* 2007年，换工作后第一个工作任务就是写一个数据接口服务，让东软来请求，把我们的数据定期同步给东软。好在公司有以前的接口示例，和物价局那个差不过，都是以XML传送数据的，有例子就好写多了，但是在正式的那天晚上，公司就留了我一个人与东软进行上线后的测试，结果出了问题，结果是上线失败，好在失败的主要原因是东软的那一个服务不好用。然后我查我程序的原因查到第二天早上，发现是大董同学把所有的oracle触发器都写错了，里面的时间格式都弄成了to_char(SYSDATE,'yyyy-MM-dd HH:mm:ss'),是不是闹，给项目经理发封邮件，回家睡觉去。这个接口也运行了好几年，也出过好多小问题。

* 然后是公司程序调用的各种HTTP接口，其中基于Soap协议的感觉好麻烦，我们一直都是基于以前的程序修改，从没从头写过这样的接口服务。

* 中国移动的BOSS开户接口，改过一些，记得某天晚上加班，我做什么忘记了，别一位同学在移动方面某人的关注下一起在改三期的开户结果，要求不改完不能下班。我的工作做完后，已经快凌晨了，又困又饿的情况下，我先回家睡觉了，听说那二位到亮天后才走。

* 感觉最牛的还是基于socket的mccd服务，在上面适配的各种车机协议是怎么做到的呢，可惜只有RPM安装包，没有源码，有也看不懂，不会C语言。

* 最后到了车务通三期的时候，感觉各种接口怎么变的可烂的了呢。

* 短信接口，移动的短信网关没直接连接过，公司的短信代理服务直接连接短信网关，我连接代理发短信就行了。但是其他公司的短信接口使用过，都是基于http的。还弄过一个语音短信的服务，直接把语音内容插入到对方指定的数据库里就行了！

* 彩信接口，彩信协议也很复杂，反正写完之后也不知道对错，只能部署到服务器上去调试。

* 做LBS应用，调用过各种地图API，东软的地图API写的最垃圾了。

* 在现在公司，基本没什么和外部交互的接口，最常用的就是万网的IDC接口。今年有了盘古主机，有幸对接了一个BCH接口，从中学到了不少关于restful API的东西。正好用于现在的移动应用API开发中。现在用的 django rest framework 开发也确定是非常方便。
